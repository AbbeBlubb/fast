!function(n){function t(t){for(var o,a,r=t[0],c=t[1],l=t[2],d=0,p=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(n[o]=c[o]);for(u&&u(t);p.length;)p.shift()();return s.push.apply(s,l||[]),e()}function e(){for(var n,t=0;t<s.length;t++){for(var e=s[t],o=!0,r=1;r<e.length;r++){var c=e[r];0!==i[c]&&(o=!1)}o&&(s.splice(t--,1),n=a(a.s=e[0]))}return n}var o={},i={0:0},s=[];function a(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=n,a.c=o,a.d=function(n,t,e){a.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},a.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,t){if(1&t&&(n=a(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)a.d(e,o,function(t){return n[t]}.bind(null,o));return e},a.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(t,"a",t),t},a.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},a.p="";var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;s.push([25,1]),e()}([,,function(n,t,e){},,function(n,t,e){var o={"./1.jpg":5,"./10.jpg":6,"./11.jpg":7,"./12.jpg":8,"./13.jpg":9,"./14.jpg":10,"./15.jpg":11,"./16.jpg":12,"./17.jpg":13,"./18.jpg":14,"./19.jpg":15,"./2.jpg":16,"./20.jpg":17,"./3.jpg":18,"./4.jpg":19,"./5.jpg":20,"./6.jpg":21,"./7.jpg":22,"./8.jpg":23,"./9.jpg":24};function i(n){var t=s(n);return e(t)}function s(n){if(!e.o(o,n)){var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}return o[n]}i.keys=function(){return Object.keys(o)},i.resolve=s,n.exports=i,i.id=4},function(n,t,e){n.exports=e.p+"/assets/1.jpg"},function(n,t,e){n.exports=e.p+"/assets/10.jpg"},function(n,t,e){n.exports=e.p+"/assets/11.jpg"},function(n,t,e){n.exports=e.p+"/assets/12.jpg"},function(n,t,e){n.exports=e.p+"/assets/13.jpg"},function(n,t,e){n.exports=e.p+"/assets/14.jpg"},function(n,t,e){n.exports=e.p+"/assets/15.jpg"},function(n,t,e){n.exports=e.p+"/assets/16.jpg"},function(n,t,e){n.exports=e.p+"/assets/17.jpg"},function(n,t,e){n.exports=e.p+"/assets/18.jpg"},function(n,t,e){n.exports=e.p+"/assets/19.jpg"},function(n,t,e){n.exports=e.p+"/assets/2.jpg"},function(n,t,e){n.exports=e.p+"/assets/20.jpg"},function(n,t,e){n.exports=e.p+"/assets/3.jpg"},function(n,t,e){n.exports=e.p+"/assets/4.jpg"},function(n,t,e){n.exports=e.p+"/assets/5.jpg"},function(n,t,e){n.exports=e.p+"/assets/6.jpg"},function(n,t,e){n.exports=e.p+"/assets/7.jpg"},function(n,t,e){n.exports=e.p+"/assets/8.jpg"},function(n,t,e){n.exports=e.p+"/assets/9.jpg"},function(n,t,e){"use strict";e.r(t);e(2);var o=e(0),i=e.n(o);function s(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}var a=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.subscriptions=t||{},this.getNextUniqueId=this.getIdGenerator()}var t,e,o;return t=n,(e=[{key:"getIdGenerator",value:function(){var n=0;return function(){return n+=1}}},{key:"logNextId",value:function(){var n=this.getNextUniqueId();console.log(n)}},{key:"subscribe",value:function(n,t){var e=this,o=this.getNextUniqueId();return this.subscriptions[n]||(this.subscriptions[n]={}),this.subscriptions[n][o]=t,{unsubscribe:function(){delete e.subscriptions[n][o],0===Object.keys(e.subscriptions[n]).length&&delete e.subscriptions[n]}}}},{key:"publish",value:function(n){var t=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.subscriptions[n]&&(null===e?Object.keys(this.subscriptions[n]).forEach((function(e){return t.subscriptions[n][e]()})):Object.keys(this.subscriptions[n]).forEach((function(o){return t.subscriptions[n][o](e)})))}}])&&s(t.prototype,e),o&&s(t,o),n}(),r="\n  <nav class='navigation'>\n    <button class='navigation__button' route='/'>Lazy</button>\n    <button class='navigation__button' route='/infinite'>Infinite</button>\n    <button class='navigation__button' route='/fastness'>Fastness</button>\n  </nav>\n",c=e(1),l=e.n(c);function u(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d="IntersectionObserver"in window,p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t+n},f=0,h="\n  <div class='data' id='data'>\n    Images loaded: <span class='image-count'>0</span>\n  </div>\n",g=0,v="\n  <div class='data' id='data'>\n    Times recycled: <span class='recycling-count'>0</span>\n    Padding/height?\n  </div>\n",b={navigationTabIsActive:{hardCoded1:function(n){!function(n){document.querySelectorAll(".navigation__button").forEach((function(n){return n.classList.remove("navigation__button--is-active")})),document.querySelector("[route='".concat(n,"']")).classList.add("navigation__button--is-active")}(n)}},oneImageHasBeenLoaded:{hardcoded2:function(){f=p(1,f),document.querySelector(".image-count").innerHTML=f}},resetImageCounter:{hardcoded3:function(){f=0}},oneRecyclingHasBeenDone:{hardcoded4:function(){g=p(1,g),document.querySelector(".recycling-count").innerHTML=g}},resetRecyclingCounter:{hardcoded5:function(){g=0}}},m="\n  <section class='not-found'>\n    <span class='not-found__message'>\n      404\n    </span>\n  </section>\n";function y(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}var w=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.routes=t,window.addEventListener("DOMContentLoaded",this.registerDOMRoutes.bind(this),!1),window.addEventListener("popstate",this.popStateCallback.bind(this),!1)}var t,e,o;return t=n,(e=[{key:"popStateCallback",value:function(n){n.state&&this.reactOnURLChange(window.location.pathname)}},{key:"loadInitialRoute",value:function(n){console.log(n);var t=document.getElementById("app"),e=this.routes.find((function(t){t.path===n||t.pathGitHub}));t.innerHTML=e?e.loadInitialPage:m,Z.publish("navigationTabIsActive",n)}},{key:"reactOnURLChange",value:function(n){var t=this.routes.find((function(t){return t.path===n}));t?t.navigationHandler():document.getElementById("app").innerHTML=m}},{key:"btnNavigate",value:function(n){var t=n.target.attributes[1].value,e=this.routes.find((function(n){return n.path===t}));e?(window.history.pushState({},"",e.path),this.reactOnURLChange(e.path),Z.publish("navigationTabIsActive",e.path)):(window.history.pushState({},"","error"),this.reactOnURLChange("error"))}},{key:"registerDOMRoutes",value:function(){var n=this;Array.from(document.querySelectorAll("[route]")).forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault,n.btnNavigate(t)}),!1)}))}}])&&y(t.prototype,e),o&&y(t,o),n}(),_="\n  <header class='header'>\n    <h1>Blazingly Fast</h1>\n  </header>\n",j="\n  <section class='about' role='contentinfo' aria-label='About the project' id='about'>\n    ".concat(d?"<p class='about-description'>\n          This page lazy-loads the images.\n          Each Image will load when 20 % of the image height has entered the viewport.\n        </p>":"<p class='about-description--error'>\n          The browser you're using doesn't support IntersectionObserver :(\n        </p>","\n  </section>"),x=function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=[],o=1;o<=n;o++)e.push(o);var i=l()(e);return[].concat(u(t),u(i))}(20,void 0).map((function(n){return"\n  <img\n    src=".concat(d?"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==":e(4)("./".concat(n,".jpg")),"\n    class='image-section__lazy-image'\n    data-src='assets/").concat(n,".jpg'\n    data-alt='Cheetahs in nature'\n    data-title='Cheetah'>\n")})).join(""),L="\n  <section class='image-section' role='contentinfo' aria-label='Section with photos' id='content'>\n    ".concat(x,"\n  </section>\n"),I='\n  <button class=\'scroll-to-top\'>\n    <svg\n      fill="white"\n      xmlns="http://www.w3.org/2000/svg"\n      width="30" height="30"\n      viewBox="0 0 24 24">\n      <path fill="none" d="M0 0h24v24H0V0z"/>\n      <path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"/>\n    </svg>\n  </button>\n',O=null;window.addEventListener("DOMContentLoaded",(function(){(O=document.querySelector(".scroll-to-top")).addEventListener("click",(function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}))})),window.addEventListener("scroll",(function(){window.pageYOffset>300?O.classList.contains("btn-entrance")||(O.classList.remove("btn-exit"),O.classList.add("btn-entrance"),O.style.display="block"):O.classList.contains("btn-entrance")&&(O.classList.remove("btn-entrance"),O.classList.add("btn-exit"),this.setTimeout((function(){O.style.display="none"}),250))}));var T=_+r+j+h+L+I,A="\n  <section class='about' role='contentinfo' aria-label='About the project' id='about'>\n    <p class='about-description'>\n      There's 20 DOM elements in the scroll section below.\n      Those elements will be recycled when scrolling, instead of adding elements to the DOM or reloading elements in the DOM.\n      When the 1:st or the 20:th element is intersecting the viewport,\n      the elements will be moved and the content of the entering elements will be changed.\n      This gives an effect of seamless infinite scroll at the same time the DOM is as light and fast as possible.\n    </p>\n  </section>",E="\n  <section class='scroll-section' role='contentinfo' aria-label='Infinite scroll' id='content'>\n    <ul class='scroll-section__ul'></ul>\n  </section>\n",M="\n  <section class='about' role='contentinfo' aria-label='About the project' id='about'>\n    <p class='about-description'>\n      aboutFastness\n    </p>\n  </section>",S="\n  <div class='data' id='data'>\n    Data fastness (delete content)\n  </div>\n",k="\n  <section class='image-section' role='contentinfo' aria-label='xxx' id='content'>\n    <p>Feature section</p>\n  </section>\n",C=function(n,t,e,o){return"\n  <li class='tile' id='tile-".concat(n,"'>\n\n    <div class='tile-placeholder'>\n      <div class='tile-placeholder__background'>\n        <div class='tile-placeholder__vertical-line'></div>\n        <div class='tile-placeholder__rectangle-first'></div>\n        <div class='tile-placeholder__horizontal-line-second'></div>\n        <div class='tile-placeholder__horizontal-line-third'></div>\n      </div>\n    </div>\n\n    <div class='tile-info'>\n      <div class='tile-info__grid'>\n        <div class='tile-info__cell-1'>Recyclable DOM element</div>\n        <div class='tile-info__cell-2 right bold'>").concat(n,"</div>\n        <div class='tile-info__cell-3'>of</div>\n        <div class='tile-info__cell-4 right'>").concat(t,"</div>\n\n        <div class='tile-info__cell-5'>Containing array index item</div>\n        <div class='tile-info__cell-6 right bold'><span class='tile-info__index'>").concat(e,"</span></div>\n        <div class='tile-info__cell-7'>of</div>\n        <div class='tile-info__cell-8 right'>").concat(o,"</div>\n\n      </div>\n    </div>\n\n  </li>\n")},B=function(n,t,e){var o,i=t/2;return(o=n?e+i:e-i)<0&&(o=0),o},H=function(n){return Number(n.substring(0,n.length-2))},D=function(n,t){var e=document.querySelector(".scroll-section__ul");console.log("Current padding-top: ",e.style.paddingTop);var o=H(e.style.paddingTop),i=H(e.style.paddingBottom),s=t/2*190;n?(e.style.paddingTop=o+s+"px",e.style.paddingBottom=0===i?"0px":i-s+"px"):(e.style.paddingTop=0===o?"0px":o-s+"px",e.style.paddingBottom=i+s+"px")},R=function(n,t){for(var e=0;e<t;e++){document.querySelector("#tile-".concat(e+1)).querySelector(".tile-info__index").innerText="".concat(n+e+1)}},z=[],F=function(){var n;z=function(n){for(var t=[],e=0;e<n;e++)t.push({indexNumber:e});return t}(200),function(n){for(var t=document.querySelector(".scroll-section__ul"),e=0;e<n;e++)t.insertAdjacentHTML("beforeend",C(e+1,20,z[e].indexNumber+1,200))}(20),(n=new IntersectionObserver((function(n){n.forEach((function(n){"tile-1"===n.target.id?J(n):n.target.id==="tile-".concat(20)&&U(n)}))}),{root:null,rootMargin:"0px",threshold:.5})).observe(document.querySelector("#tile-1")),n.observe(document.querySelector("#tile-".concat(20)))};window.onload=function(){return F()};var P=0,q=0,N=0,U=function(n){if(180!==P){var t=n.boundingClientRect.top,e=n.intersectionRatio,o=n.isIntersecting;if(console.log(t,e,o),t<q&&e>N&&o){var i=B(!0,20,P);D(!0,20),R(i,20),P=i,Z.publish("oneRecyclingHasBeenDone")}q=t,N=e}},V=0,G=0,J=function(n){var t=n.boundingClientRect.top,e=n.intersectionRatio,o=n.isIntersecting;if(t>V&&o&&e>=G&&0!==P){var i=B(!1,20,P);D(!1,20),R(i,20),P=i,Z.publish("oneRecyclingHasBeenDone")}V=t,G=e},W=[{path:"/",pathGitHub:"/lazy-loading/",name:"Root",navigationHandler:function(){document.getElementById("about").outerHTML=j,Z.publish("resetImageCounter"),document.getElementById("data").outerHTML=h,document.getElementById("content").outerHTML=L,$.onLoaded()},loadInitialPage:T},{path:"/infinite",name:"Infinite",navigationHandler:function(){document.getElementById("about").outerHTML=A,Z.publish("resetRecyclingCounter"),document.getElementById("data").outerHTML=v,document.getElementById("content").outerHTML=E,F()},loadInitialPage:"\n  <header class='header'>\n    <h1>Blazingly Fast</h1>\n  </header>\n\n  <nav class='navigation'>\n    <button class='navigation__button' route='/'>Lazy</button>\n    <button class='navigation__button' route='/infinite'>Infinite</button>\n    <button class='navigation__button' route='/fastness'>Fastness</button>\n  </nav>\n\n  <section class='about' role='contentinfo' aria-label='About the project' id='about'>\n    <p class='about-description'>\n      There's 20 DOM elements in the scroll section below.\n      Those elements will be recycled when scrolling, instead of adding elements to the DOM or reloading elements in the DOM.\n      When the 1:st or the 20:th element is intersecting the viewport,\n      the elements will be moved and the content of the entering elements will be changed.\n      This gives an effect of seamless infinite scroll at the same time the DOM is as light and fast as possible.\n    </p>\n  </section>\n  <div class='data' id='data'>\n    Times recycled: <span class='recycling-count'>0</span>\n    Padding/height?\n  </div>\n\n  <section class='scroll-section' role='contentinfo' aria-label='Infinite scroll' id='content'>\n    <ul class='scroll-section__ul'></ul>\n  </section>\n\n  <button class='scroll-to-top'>\n    <svg\n      fill=\"white\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"30\" height=\"30\"\n      viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n      <path d=\"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\"/>\n    </svg>\n  </button>\n"},{path:"/fastness",name:"Fastness",navigationHandler:function(){document.getElementById("about").outerHTML=M,document.getElementById("data").outerHTML=S,document.getElementById("content").outerHTML=k},loadInitialPage:"\n  <header class='header'>\n    <h1>Blazingly Fast</h1>\n  </header>\n\n  <nav class='navigation'>\n    <button class='navigation__button' route='/'>Lazy</button>\n    <button class='navigation__button' route='/infinite'>Infinite</button>\n    <button class='navigation__button' route='/fastness'>Fastness</button>\n  </nav>\n\n  <section class='about' role='contentinfo' aria-label='About the project' id='about'>\n    <p class='about-description'>\n      aboutFastness\n    </p>\n  </section>\n  <div class='data' id='data'>\n    Data fastness (delete content)\n  </div>\n\n  <section class='image-section' role='contentinfo' aria-label='xxx' id='content'>\n    <p>Feature section</p>\n  </section>\n\n  <button class='scroll-to-top'>\n    <svg\n      fill=\"white\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"30\" height=\"30\"\n      viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n      <path d=\"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\"/>\n    </svg>\n  </button>\n"}];function K(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}var Q=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.images,this.imageObserver,this.options={root:null,rootMargin:"0px",threshold:.2},d&&window.addEventListener("load",this.onLoaded.bind(this),!1)}var t,e,o;return t=n,(e=[{key:"createObserver",value:function(n){var t=this;this.imageObserver=new IntersectionObserver(this.onIntersectionEvent,n),this.images.forEach((function(n){t.imageObserver.observe(n)}))}},{key:"onLoaded",value:function(){this.images=document.querySelectorAll(".image-section__lazy-image"),this.createObserver(this.options)}},{key:"onIntersectionEvent",value:function(n,t){n.forEach((function(n){if(n.isIntersecting){console.log("Intersecting image: ",n);var e=n.target;e.src=e.dataset.src,e.alt=e.dataset.alt,e.title=e.dataset.title,e.classList.add("fade-in"),t.unobserve(n.target),Z.publish("oneImageHasBeenLoaded")}}))}}])&&K(t.prototype,e),o&&K(t,o),n}();function Y(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}var X=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),"onkeydown"in window&&window.addEventListener("keydown",this.userIsTabbing.bind(this),!1),"onmousedown"in window&&window.addEventListener("mousedown",this.userIsClicking.bind(this),!1),this.classForCSS="user-is-tabbing"}var t,e,o;return t=n,(e=[{key:"userIsTabbing",value:function(n){9!==n.keyCode||document.body.classList.contains(this.classForCSS)||document.body.classList.add(this.classForCSS)}},{key:"userIsClicking",value:function(){document.body.classList.contains(this.classForCSS)&&document.body.classList.remove(this.classForCSS)}}])&&Y(t.prototype,e),o&&Y(t,o),n}();e.d(t,"eventBusSingleton",(function(){return Z})),e.d(t,"imageObserverSingleton",(function(){return $})),i.a.polyfill();var Z=new a(b);new w(W).loadInitialRoute(window.location.pathname);var $=new Q;new X}]);
//# sourceMappingURL=bundle.js.map